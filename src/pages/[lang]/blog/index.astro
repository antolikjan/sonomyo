---
import Layout from '../../../layouts/Layout.astro'
import Hero from '../../../components/blocks/hero/PageHeader.astro'
import BlogPosts from '../../../components/blocks/blog/BlogPosts.astro'
import { getCollection } from 'astro:content'

const SEO = {
  title: 'Sonomyo | Blog',
  description:
    'Explore news, stories and insights from the world of myofunctional therapy, speech therapy and science.'
}

const header = {
  title: 'The <strong>Sonomyo</strong> Blog. Tips, Updates & Stories',
  text: 'Stay informed. All the latest from the world of myofunctional therapy and speech science.'
}

export function getStaticPaths() {
  return [
    { params: { lang: 'cs' } },
    { params: { lang: 'en' } },
  ];
}

const lang = Astro.params.lang === 'en' ? 'en' : 'cs'

// only posts in this language folder:
const posts = await getCollection('blog', ({ id, data }) =>
  id.startsWith(`${lang}/blog/`) && !data.draft
)
---

<Layout title={SEO.title} description={SEO.description}>
  <Hero title={header.title} text={header.text} />
  <BlogPosts data={posts} lang={lang}/>
</Layout>
