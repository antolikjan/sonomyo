---
import Layout from '../../../layouts/Layout.astro'
import Hero from '../../../components/blocks/hero/PageHeader.astro'
import BlogPosts from '../../../components/blocks/blog/BlogPosts.astro'
import { getCollection } from 'astro:content'
import { ui } from '../../../i18n/ui'

const SEO = {
  title: 'SonoMyo | Blog',
  description:
    'Explore news, stories and insights from the world of myofunctional therapy, speech therapy and science.'
}

const lang = Astro.params.lang === 'en' ? 'en' : 'cs'
const t = ui[lang].blog


const header = {
  title: t['title'],
  text: t['text']
}

export function getStaticPaths() {
  return [
    { params: { lang: 'cs' } },
    { params: { lang: 'en' } },
  ];
}



// only posts in this language folder:
const posts = await getCollection('blog', ({ id, data }) =>
  id.startsWith(`${lang}/blog/`) && !data.draft
)
---

<Layout title={SEO.title} description={SEO.description}>
  <Hero title={header.title} text={header.text} />
  <BlogPosts data={posts} lang={lang}/>
</Layout>
