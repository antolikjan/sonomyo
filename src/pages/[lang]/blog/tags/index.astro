---
import Layout from '../../../../layouts/Layout.astro'
import Hero from '../../../../components/blocks/hero/PageHeader.astro'
import BlogPosts from '../../../../components/blocks/blog/BlogPosts.astro'
import { getCollection } from 'astro:content'

export async function getStaticPaths() {
  return ['cs', 'en'].map((lang) => ({ params: { lang } }))
}

const lang = Astro.params.lang === 'en' ? 'en' : 'cs'

const posts = await getCollection('blog', ({ id, data }) =>
  id.startsWith(`${lang}/blog/`) && !data.draft
)
---

<Layout>
  <Hero title="Tags" />
  <BlogPosts data={posts} lang={lang}/>
</Layout>
