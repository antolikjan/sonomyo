---
import Layout from '../../layouts/Layout.astro';
import Section from '../../components/ui/Section.astro';
import Row from '../../components/ui/Row.astro';
import Col from '../../components/ui/Col.astro';
import { ui } from '../../i18n/ui'


import { getEntry, render } from 'astro:content';
import { strictObject } from 'astro:schema';

// Get the "about" entry from the "pages" collection
const lang = Astro.params.lang === 'en' ? 'en' : 'cs';
const t = ui[lang].about


import { getCollection } from 'astro:content';

const entries = await getCollection('pages');
console.log('PAGES IDS:', entries.map(e => e.id));

const entry = await getEntry('pages',`about${lang}`);

if (!entry) {
  throw new Error('Could not find src/content/pages/about.[lang].md(x)'+lang);
}

// Same pattern as the blog: render(entry)
const { Content } = await render(entry);
const frontmatter = entry.data;

export function getStaticPaths() {
  return [
    { params: { lang: 'cs' } },
    { params: { lang: 'en' } },
  ];
}


---

<Layout title={frontmatter.title}>
  <!-- Top section: photo + name + blurb -->
  <Section classes="py-16">
    <Row classes="items-center gap-8">
      <Col span="4" classes="flex justify-center">
        <img
          src="/tanja_photo.png" 
          alt="Therapist portrait"
          class="rounded-2xl w-64 h-64 object-cover shadow-lg"
          loading="lazy"
        />
      </Col>

      <Col span="8">
        <h1 class="text-3xl md:text-4xl font-semibold mb-4">
          {frontmatter.title}
        </h1>
        <p class="text-lg text-neutral-600 dark:text-neutral-300 max-w-xl">
          {t['description']}
        </p>
      </Col>
    </Row>
  </Section>

  <!-- Markdown body from about.md -->
  <Section classes="py-10">
    <Row>
      <Col span="12" classes="max-w-3xl mx-auto">
        <article class="prose dark:prose-invert prose-lg max-w-none">
          <Content />
        </article>
      </Col>
    </Row>
  </Section>
</Layout>